(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{238:function(t,e,r){"use strict";var n=r(8),o=r(5),c=r(88),l=r(14),d=r(9),f=r(45),v=r(179),_=r(67),h=r(4),m=r(53),y=r(68).f,C=r(32).f,O=r(13).f,P=r(239).trim,j="Number",w=o.Number,A=w.prototype,S=f(m(A))==j,N=function(t){var e,r,n,o,c,l,d,code,f=_(t,!1);if("string"==typeof f&&f.length>2)if(43===(e=(f=P(f)).charCodeAt(0))||45===e){if(88===(r=f.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+f}for(l=(c=f.slice(2)).length,d=0;d<l;d++)if((code=c.charCodeAt(d))<48||code>o)return NaN;return parseInt(c,n)}return+f};if(c(j,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var E,I=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof I&&(S?h((function(){A.valueOf.call(r)})):f(r)!=j)?v(new w(N(e)),r,I):N(e)},x=n?y(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;x.length>k;k++)d(w,E=x[k])&&!d(I,E)&&O(I,E,C(w,E));I.prototype=A,A.constructor=I,l(o,j,I)}},239:function(t,e,r){var n=r(17),o="["+r(240)+"]",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(c,"")),2&t&&(r=r.replace(l,"")),r}};t.exports={start:d(1),end:d(2),trim:d(3)}},240:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},241:function(t,e,r){"use strict";r(238);var n={name:"CRating",props:{rating:{type:Number,required:!0}},computed:{ratingToPercent:function(){return 100*this.rating/5}}},o=r(34),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"rating",style:" background: linear-gradient(to right,orange 0%,orange "+t.ratingToPercent+"%,#fff "+t.ratingToPercent+"%,#fff 100%);"})}),[],!1,null,null,null);e.a=component.exports},242:function(t,e,r){"use strict";var n=r(2),o=r(70),c=r(22),l=r(15),d=r(4),f=r(243),v=r(126),_=r(244),h=r(245),m=r(69),y=r(246),C=[],O=C.sort,P=d((function(){C.sort(void 0)})),j=d((function(){C.sort(null)})),w=v("sort"),A=!d((function(){if(m)return m<70;if(!(_&&_>3)){if(h)return!0;if(y)return y<603;var code,t,e,r,n="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)C.push({k:t+r,v:e})}for(C.sort((function(a,b){return b.v-a.v})),r=0;r<C.length;r++)t=C[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));n({target:"Array",proto:!0,forced:P||!j||!w||!A},{sort:function(t){void 0!==t&&o(t);var e=c(this);if(A)return void 0===t?O.call(e):O.call(e,t);var r,n,d=[],v=l(e.length);for(n=0;n<v;n++)n in e&&d.push(e[n]);for(r=(d=f(d,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:String(e)>String(r)?1:-1}}(t))).length,n=0;n<r;)e[n]=d[n++];for(;n<v;)delete e[n++];return e}})},243:function(t,e){var r=Math.floor,n=function(t,e){var l=t.length,d=r(l/2);return l<8?o(t,e):c(n(t.slice(0,d),e),n(t.slice(d),e),e)},o=function(t,e){for(var element,r,n=t.length,i=1;i<n;){for(r=i,element=t[i];r&&e(t[r-1],element)>0;)t[r]=t[--r];r!==i++&&(t[r]=element)}return t},c=function(t,e,r){for(var n=t.length,o=e.length,c=0,l=0,d=[];c<n||l<o;)c<n&&l<o?d.push(r(t[c],e[l])<=0?t[c++]:e[l++]):d.push(c<n?t[c++]:e[l++]);return d};t.exports=n},244:function(t,e,r){var n=r(87).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},245:function(t,e,r){var n=r(87);t.exports=/MSIE|Trident/.test(n)},246:function(t,e,r){var n=r(87).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},247:function(t,e,r){"use strict";r.r(e);r(46),r(18),r(54),r(33),r(55);var n=r(6),o=r(169),c=r(24),l=(r(40),r(41),r(242),r(64)),d=(r(238),{name:"ProductCard",components:{CRating:r(241).a},props:{category:{type:String,required:!0},title:{type:String,required:!0},image:{type:String,required:!0},id:{type:Number,required:!0},price:{type:Number,required:!0},rating:{type:Object}}}),f=r(34),v=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nuxt-link",{staticClass:"product-card",attrs:{to:"products/"+t.id}},[r("header",{staticClass:"product-card__header"},[r("span",{staticClass:"product-card__title"},[t._v(t._s(t.title))])]),t._v(" "),r("div",{staticClass:"product-card__row"},[r("span",{staticClass:"product-card__rating-legend"},[t._v("\n      "+t._s(t.rating.rate)+" ("+t._s(t.rating.count)+")\n    ")]),t._v(" "),r("CRating",{staticClass:"product-card__rating-star",attrs:{rating:t.rating.rate}})],1),t._v(" "),r("img",{staticClass:"product-card__image",attrs:{alt:t.title,src:t.image}}),t._v(" "),r("footer",{staticClass:"product-card__footer"},[r("button",{staticClass:"product-card__button button",attrs:{type:"button"}},[t._v("\n      Add to cart\n    ")]),t._v(" "),r("span",{staticClass:"product-card__price"},[t._v("$"+t._s(t.price))])])])}),[],!1,null,null,null).exports;function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m="All",y="price-asc",C="price-desc",O="rating-asc",P="rating-desc",j="rating-count-asc",w="rating-count-desc",A={name:"ProductPage",data:function(){return{selectedCategory:m,selectedSort:y}},components:{ProductCard:v},computed:h(h({},Object(l.c)({getProducts:"common/getProducts",getCategories:"common/getCategories"})),{},{filteredAndSortedProducts:function(){var t,e=this,r=this.selectedCategory===m?Object(o.a)(this.getProducts):this.getProducts.filter((function(t){return t.category===e.selectedCategory})),n=(t={},Object(c.a)(t,y,(function(a,b){return a.price-b.price})),Object(c.a)(t,C,(function(a,b){return b.price-a.price})),Object(c.a)(t,O,(function(a,b){return a.rating.rate-b.rating.rate})),Object(c.a)(t,P,(function(a,b){return b.rating.rate-a.rating.rate})),Object(c.a)(t,j,(function(a,b){return a.rating.count-b.rating.count})),Object(c.a)(t,w,(function(a,b){return b.rating.count-a.rating.count})),t);return r.sort(n[this.selectedSort])}}),fetch:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,e.next=3,r.dispatch("common/fetchAllProducts");case 3:return e.next=5,r.dispatch("common/fetchAllCategories");case 5:case"end":return e.stop()}}),e)})))()},methods:h(h({},Object(l.b)({fetchAllProducts:"common/fetchAllProducts"})),{},{onChangeCategory:function(t){var e=h({},this.$route.query);e.category=t.target.value,this.$router.push({query:e})},onChangeSort:function(t){var e=h({},this.$route.query);e.sortBy=t.target.value,this.$router.push({query:e})},setDefaultFilters:function(){var t=this.$route.query,e=t.category,r=t.sortBy;e&&(this.selectedCategory=e),r&&(this.selectedSort=r)}}),mounted:function(){this.setDefaultFilters()}},S=Object(f.a)(A,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-page"},[r("div",{staticClass:"product-page__filters"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCategory,expression:"selectedCategory"}],staticClass:"product-page__select",attrs:{id:""},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedCategory=e.target.multiple?r:r[0]},t.onChangeCategory]}},t._l(t.getCategories,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v("\n        "+t._s(e)+"\n      ")])})),0),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedSort,expression:"selectedSort"}],staticClass:"product-page__select",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedSort=e.target.multiple?r:r[0]},t.onChangeSort]}},[r("option",{attrs:{value:"price-desc"}},[t._v("Price: High to Low")]),t._v(" "),r("option",{attrs:{value:"price-asc"}},[t._v("Price: Low to High")]),t._v(" "),r("option",{attrs:{value:"rating-desc"}},[t._v("Rating: High to Low")]),t._v(" "),r("option",{attrs:{value:"rating-asc"}},[t._v("Rating: Low to High")]),t._v(" "),r("option",{attrs:{value:"rating-count-desc"}},[t._v("Rating count: High to Low")]),t._v(" "),r("option",{attrs:{value:"rating-count-asc"}},[t._v("Rating count: Low to High")])])]),t._v(" "),r("section",{staticClass:"product-page__products products"},[r("h1",{staticClass:"products__title"},[t._v("Products")]),t._v(" "),r("div",{staticClass:"products__list"},t._l(t.filteredAndSortedProducts,(function(t){return r("ProductCard",{key:t.id,staticClass:"products__product",attrs:{id:t.id,category:t.category,image:t.image,price:t.price,rating:t.rating,title:t.title}})})),1)])])}),[],!1,null,null,null);e.default=S.exports}}]);